//-/////////////////////////////////////////////////////////////////////////////
//-                                                                           //
//-              This file is part of the Buildbotics firmware.               //
//-                                                                           //
//-                Copyright (c) 2015 - 2018, Buildbotics LLC                 //
//-                           All rights reserved.                            //
//-                                                                           //
//-   This file ("the software") is free software: you can redistribute it    //
//-   and/or modify it under the terms of the GNU General Public License,     //
//-    version 2 as published by the Free Software Foundation. You should     //
//-    have received a copy of the GNU General Public License, version 2      //
//-   along with the software. If not, see <http://www.gnu.org/licenses/>.    //
//-                                                                           //
//-   The software is distributed in the hope that it will be useful, but     //
//-        WITHOUT ANY WARRANTY; without even the implied warranty of         //
//-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU      //
//-             Lesser General Public License for more details.               //
//-                                                                           //
//-     You should have received a copy of the GNU Lesser General Public      //
//-              License along with the software.  If not, see                //
//-                     <http://www.gnu.org/licenses/>.                       //
//-                                                                           //
//-              For information regarding this software email:               //
//-                "Joseph Coffland" <joseph@buildbotics.com>                 //
//-                                                                           //
//-/////////////////////////////////////////////////////////////////////////////

script#view-viewer-template(type="text/x-template")
  #viewer
    nav.navbar
      nav-item
        | File
        .fa.fa-caret-down

        nav-menu
          nav-item(@click="open()", title="Open a new program.")
            .fa.fa-folder-open
            span Open

          nav-item(@click="$root.edit(path)",
            title="Open the current program in the editor.")
            .fa.fa-pencil
            span Edit

          nav-item(@click="$root.run(path)", :disabled="state.xx != 'READY'",
            title="Start the current program.")
            .fa.fa-play
            span Run

      nav-item
        | View
        .fa.fa-caret-down
        nav-menu
          nav-item(@click="toggle('tool')")
            .fa(:class="show.tool ? 'fa-check' : ''")
            span Show Tool

          nav-item(@click="toggle('axes')")
            .fa(:class="show.axes ? 'fa-check' : ''")
            span Show Axes

          nav-item(@click="toggle('grid')")
            .fa(:class="show.grid ? 'fa-check' : ''")
            span Show Grid

          nav-item(@click="toggle('dims')")
            .fa(:class="show.dims ? 'fa-check' : ''")
            span Show Bounds

          nav-item(@click="toggle('intensity')")
            .fa(:class="show.intensity ? 'fa-check' : ''")
            span LASER Raster

      nav-item
        | Snap
        .fa.fa-caret-down
        nav-menu
          nav-item.snap(v-for="name in snaps" @click="snap(name)")
            img(:src="'images/' + name + '.png'")
            span {{name}}

      nav-item(@click="$refs.helpDialog.open()") Help

      .filename {{filename}}

    loading-message(v-if="loading", :progress="progress")
      p(slot="body").
        Simulating program to check for errors, calculate timing and generate
        3D view. Please wait...

    viewer-help-dialog(v-ref:help-dialog)

    path-viewer(v-ref:viewer, :toolpath="toolpath", :state="state",
      :config="config")
